# Обзор HiLink API

## Общие принципы

HiLink API предоставляет программный доступ к устройствам Huawei HiLink через HTTP-запросы. API разработан на основе унифицированной системы WebUI, которая работает для разных типов устройств HiLink (модемы, маршрутизаторы и т.д.).

## Архитектура API

### Два режима работы

HiLink API работает в двух различных режимах:

#### Информационный вариант (GET)
- **Цель**: Получение информации с устройства
- **Метод**: HTTP GET
- **Ответ**: Немедленный ответ с XML-данными
- **Пример**: `GET http://192.168.8.1/api/monitoring/status`

#### Управляющий/конфигурационный вариант (POST)
- **Цель**: Изменение настроек устройства или запуск действий
- **Метод**: HTTP POST с XML-телом запроса
- **Ответ**: Обычно `OK` для успешных операций
- **Пример**: Перезагрузка устройства, отправка SMS, изменение конфигурации

### Унифицированная структура конечных точек

Большинство конечных точек API поддерживают операции GET и POST, используя один и тот же URL-путь:
- GET: Получение текущих настроек/статуса
- POST: Изменение настроек или запуск действий

## Формат запросов/ответов

### Формат запроса (POST)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <Parameter1>value1</Parameter1>
    <Parameter2>value2</Parameter2>
</request>
```

### Формат ответа
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <Field1>value1</Field1>
    <Field2>value2</Field2>
</response>
```

### Ответ об успехе
Для успешных POST-операций:
```
OK
```

### Ответ об ошибке
Для неудачных операций возвращаются коды ошибок:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<error>
    <code>100006</code>
    <message>Неверный параметр</message>
</error>
```

## Базовые URL API

- **Основной**: `http://192.168.8.1/api/`
- **Альтернативный**: `http://hi.link/api/` (если настроено)

## Совместимость устройств

### Независимость от аппаратного обеспечения
Программное обеспечение HiLink унифицировано для разных типов устройств. Модем содержит те же файлы WebUI, что и маршрутизатор, но некоторые функции могут быть:
- Отключены из-за аппаратных ограничений
- Заблокированы конфигурационными файлами
- Неприменимы к типу устройства

### Совместимость версий
Конечные точки API и ответы могут различаться между версиями прошивки. Документация основана на JavaScript файлах прошивки модема E3372s-153.

## Организация модулей

API организован в логические модули:

### Основные модули
- **Device**: Базовая информация об устройстве и управление
- **Monitoring**: Статус и статистика трафика
- **SMS**: Управление сообщениями
- **Dialup**: Управление соединением

### Сетевые модули
- **WLAN**: Конфигурация WiFi
- **DHCP**: Настройки DHCP-сервера
- **Net**: Конфигурация сети

### Модули безопасности
- **Security**: Аутентификация и контроль доступа
- **PIN**: Управление PIN SIM-карты

### Системные модули
- **Global**: Переключатели модулей и глобальные настройки
- **Language**: Настройки интернационализации

### Продвинутые модули
- **OTA**: Обновления по воздуху
- **Diagnosis**: Сетевая диагностика
- **Voice**: Функции голосовых вызовов

## Управление сессиями

Некоторые версии прошивки требуют токены сессии для доступа к API:
- Токены могут потребоваться для определенных операций
- Проверка токенов может быть отключена через конфигурацию
- Поведение тайм-аута сессии зависит от прошивки

## Требования к типу содержимого

POST-запросы должны включать правильный тип содержимого:
```
Content-Type: application/xml
```

## Ограничение частоты запросов

Устройства могут реализовывать ограничение частоты запросов для предотвращения злоупотребления API. Поведение зависит от прошивки и модели устройства.

## Связанная документация

- [Аутентификация](authentication-RU.md) - Детали управления сессиями
- [Обработка ошибок](examples/error-handling-RU.md) - Полный справочник кодов ошибок
- [Общие задачи](examples/common-tasks-RU.md) - Практические примеры реализации